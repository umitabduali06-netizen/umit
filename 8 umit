

from abc import ABC, abstractmethod


# --- 1. –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–ø–∏—Ç–∫–∞ ---
class Beverage(ABC):
    @abstractmethod
    def get_description(self) -> str:
        pass

    @abstractmethod
    def cost(self) -> float:
        pass


# --- 2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ ---
class Espresso(Beverage):
    def get_description(self) -> str:
        return "–≠—Å–ø—Ä–µ—Å—Å–æ"

    def cost(self) -> float:
        return 3.00


class Tea(Beverage):
    def get_description(self) -> str:
        return "–ß–∞–π"

    def cost(self) -> float:
        return 2.50


class Latte(Beverage):
    def get_description(self) -> str:
        return "–õ–∞—Ç—Ç–µ"

    def cost(self) -> float:
        return 3.50


class Mocha(Beverage):
    def get_description(self) -> str:
        return "–ú–æ–∫–∫–æ"

    def cost(self) -> float:
        return 3.75


# --- 3. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä ---
class BeverageDecorator(Beverage):
    def __init__(self, beverage: Beverage):
        self._beverage = beverage

    @abstractmethod
    def get_description(self) -> str:
        pass


# --- 4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (–¥–æ–±–∞–≤–∫–∏) ---
class Milk(BeverageDecorator):
    def get_description(self) -> str:
        return self._beverage.get_description() + ", –º–æ–ª–æ–∫–æ"

    def cost(self) -> float:
        return self._beverage.cost() + 0.50


class Sugar(BeverageDecorator):
    def get_description(self) -> str:
        return self._beverage.get_description() + ", —Å–∞—Ö–∞—Ä"

    def cost(self) -> float:
        return self._beverage.cost() + 0.20


class WhippedCream(BeverageDecorator):
    def get_description(self) -> str:
        return self._beverage.get_description() + ", –≤–∑–±–∏—Ç—ã–µ —Å–ª–∏–≤–∫–∏"

    def cost(self) -> float:
        return self._beverage.cost() + 0.70


class Syrup(BeverageDecorator):
    def get_description(self) -> str:
        return self._beverage.get_description() + ", —Å–∏—Ä–æ–ø"

    def cost(self) -> float:
        return self._beverage.cost() + 0.60


#                üí≥ –ß–ê–°–¢–¨ 2 ‚Äî –ü–ê–¢–¢–ï–†–ù –ê–î–ê–ü–¢–ï–†

# --- 1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã ---
class IPaymentProcessor(ABC):
    @abstractmethod
    def process_payment(self, amount: float):
        pass


# --- 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è PayPal ---
class PayPalPaymentProcessor(IPaymentProcessor):
    def process_payment(self, amount: float):
        print(f"[PayPal] –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ —Å—É–º–º—É {amount:.2f} $")


# --- 3. –°—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–µ—Ä–≤–∏—Å Stripe ---
class StripePaymentService:
    def make_transaction(self, total_amount: float):
        print(f"[Stripe] –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–∞ —Å—É–º–º—É {total_amount:.2f} $")


# --- 4. –ê–¥–∞–ø—Ç–µ—Ä Stripe ‚Üí IPaymentProcessor ---
class StripePaymentAdapter(IPaymentProcessor):
    def __init__(self, stripe_service: StripePaymentService):
        self._stripe_service = stripe_service

    def process_payment(self, amount: float):
        self._stripe_service.make_transaction(amount)


# --- 5. –ï—â—ë –æ–¥–∏–Ω —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–µ—Ä–≤–∏—Å (YooMoney) ---
class YooMoneyService:
    def send_payment(self, amount: float):
        print(f"[YooMoney] –ü–ª–∞—Ç—ë–∂ –Ω–∞ —Å—É–º–º—É {amount:.2f} $ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.")


class YooMoneyAdapter(IPaymentProcessor):
    def __init__(self, yoo_service: YooMoneyService):
        self._yoo_service = yoo_service

    def process_payment(self, amount: float):
        self._yoo_service.send_payment(amount)


#                ‚òï –ö–õ–ò–ï–ù–¢–°–ö–ò–ô –ö–û–î

if __name__ == "__main__":
    print("=== –ö–ê–§–ï: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ ===")

    # –ü—Ä–∏–º–µ—Ä 1 ‚Äî –≠—Å–ø—Ä–µ—Å—Å–æ —Å –¥–æ–±–∞–≤–∫–∞–º–∏
    drink = Espresso()
    drink = Milk(drink)
    drink = Sugar(drink)
    drink = WhippedCream(drink)

    print("–í–∞—à –∑–∞–∫–∞–∑:", drink.get_description())
    print("–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:", f"{drink.cost():.2f} $\n")

    # –ü—Ä–∏–º–µ—Ä 2 ‚Äî –ß–∞–π —Å —Å–∏—Ä–æ–ø–æ–º –∏ –º–æ–ª–æ–∫–æ–º
    drink2 = Tea()
    drink2 = Syrup(drink2)
    drink2 = Milk(drink2)
    print("–í–∞—à –∑–∞–∫–∞–∑:", drink2.get_description())
    print("–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:", f"{drink2.cost():.2f} $\n")

    print("=== –°–ò–°–¢–ï–ú–ê –û–ü–õ–ê–¢–´ ===")

    amount_to_pay = drink.cost() + drink2.cost()

    print(f"–û–±—â–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: {amount_to_pay:.2f} $\n")

    # –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ PayPal
    paypal = PayPalPaymentProcessor()
    paypal.process_payment(amount_to_pay)

    # –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Stripe (—á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä)
    stripe_adapter = StripePaymentAdapter(StripePaymentService())
    stripe_adapter.process_payment(amount_to_pay)

    # –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ YooMoney (—á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä)
    yoo_adapter = YooMoneyAdapter(YooMoneyService())
    yoo_adapter.process_payment(amount_to_pay)

    print("\n=== –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É! ===")
